<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />

    <title>Creating a Lesson</title>
    <meta name="author" content="Greg Wilson" />
    <!-- meta name="audio" content="voiceover.ogg" -->
    <!-- meta name="timings" content="timings.json" -->

    <script src="../js/deckjs-custom.js"></script>
    <script>includedeck(["../css/software-carpentry.css"],{});</script> 
    <style>
      .slide.title-slide h1 {padding-bottom: 0;} /* title is long... */
      a {text-decoration: underline;} /* make links clearer */
      pre {font-size: 75%;} /* make code blocks smaller */
    </style>
  </head>
  <body>
    <div class="deck-container">

      <section class="slide title-slide" data-container-class="no-status">
        <h1 class="var-title"></h1>
        <p>April 2015</p>
        <p><img src="../img/software-carpentry-banner.png" alt="Software Carpentry Logo" /></p>
      </section>

      <section class="slide">
        <h2>What</h2>
	<div align="center">
          <p>Create a new lesson for Software Carpentry</p>
	  <pre><a href="https://github.com/swcarpentry/lesson-template">https://github.com/swcarpentry/lesson-template</a></pre>
	  <pre><a href="https://github.com/swcarpentry/lesson-example">https://github.com/swcarpentry/lesson-example</a></pre>
        </div>
      </section>

      <section class="slide">
        <h2>Why</h2>
        <ol>
          <li>Modularize lessons like software libraries</li>
          <li>Ensure uniform appearance and metadata</li>
          <li>Simplify contribution</li>
        </ol>
      </section>

      <section class="slide">
        <h2>How</h2>
        <ol>
          <li>Use GitHub Import to create a new repository with material from <code>lesson-template</code></li>
	  <li>Clone to desktop</li>
          <li>Edit according to rules in <code>lesson-example</code></li>
          <li>Check</li>
	  <li>Generate HTML</li>
          <li>Push to repository's <code>gh-pages</code> branch</li>
        </ol>
      </section>

      <section class="slide">
        <h2>How</h2>
        <img src="steps.svg" alt="Steps" />
      </section>

      <section class="slide">
        <h2>Why?</h2>
        <ul>
          <li>A user can only fork a repo once on GitHub</li>
          <li>But authors may work on many lessons</li>
	  <li>So we have to manage remotes on the desktop</li>
        </ul>
      </section>

      <section class="slide">
        <h2>Template vs. Example</h2>
        <ul>
          <li><code>lesson-template</code> has CSS, tools, etc. that may be updated centrally</li>
          <li><code>lesson-example</code> is explanations that <em>shouldn't</em> be merged into lessons over and over again</li>
	  <li>Separate repositories seems less error-prone than two "main" branches in one repository</li>
        </ul>
      </section>

      <section class="slide">
        <h2>How It Works</h2>
        <ul>
	  <li>
	    Make detects out-of-date Markdown files
	    <ul>
	      <li>Or out-of-date R Markdown</li>
	      <li>Other source formats can be added</li>
	    </ul>
	  </li>
          <li><a href="http://pandoc.org/">Pandoc</a> converts to HTML</li>
	  <li>Commit the HTML to the <code>gh-pages</code> branch</li>
          <li>GitHub publishes it as a website</li>
        </ul>
      </section>

      <section class="slide">
        <h2>Why Not Jekyll?</h2>
        <ul>
	  <li><a href="https://github.com/swcarpentry/workshop-template">Workshop websites</a> use Jekyll to create HTML</li>
          <li>But its Markdown lacks features we want</li>
          <li>
	    And we have to do some conversion anyway
	    <ul>
	      <li>IPython Notebooks</li>
	      <li>R Markdown</li>
	    </ul>
	  </li>
        </ul>
      </section>

      <section class="slide">
        <h2>1. Create Repository</h2>
        <ul>
          <li><em>Not</em> a fork of <code>lesson-template</code></li>
	  <li>
	    Use <a href="http://import.github.com/new?import_url=https://github.com/swcarpentry/lesson-template">GitHub Import</a>
	    with <code><a href="https://github.com/swcarpentry/lesson-template">https://github.com/swcarpentry/lesson-template</a></code>
	    as the source URL
	  </li>
          <li>Name it topic-level or topic-level-something
            <ul>
              <li>E.g., <a href="https://github.com/swcarpentry/shell-novice">shell-novice</a></li>
              <li>Or <a href="https://github.com/swcarpentry/python-novice-inflammation">python-novice-inflammation</a></li>
            </ul>
          </li>
          <li>Can be owned by anyone</li>
        </ul>
      </section>

      <section class="slide">
        <h2>2. Clone to Desktop</h2>
<pre>$ git clone -b gh-pages git@github.com:user/some-lesson.git</pre>
        <ul>
	  <li>Make sure you're <em>not</em> already in a Git repository</li>
	  <li><code>-b gh-pages</code> to put it in the <code>gh-pages</code> branch</li>
	</ul>
      </section>

      <section class="slide">
        <h2>3. Updating</h2>
<pre>$ git remote add template https://github.com/swcarpentry/lesson-template.git</pre>
        <ul>
	  <li>Call it <code>template</code> rather than <code>upstream</code></li>
	  <li>Periodically get updates to CSS, icons, etc., from this remote</li>
	</ul>
      </section>

      <section class="slide">
        <h2>4. Edit and Check</h2>
        <ul>
          <li>See the <a href="https://github.com/swcarpentry/lesson-example">README</a> for general instructions</li>
          <li>And <a href="https://github.com/swcarpentry/lesson-example/blob/gh-pages/LAYOUT.md">lesson layout</a> for details</li>
          <li>There are <a href="https://github.com/swcarpentry/lesson-example/blob/gh-pages/DESIGN.md">notes on design</a></li>
          <li>
            And an <a href="https://github.com/swcarpentry/lesson-example/blob/gh-pages/FAQ.md">FAQ</a>
            (additions welcome)
          </li>
	  <li>Use <code>make check</code>: Validate pages</li>
        </ul>
      </section>

      <section class="slide">
        <h2>5. Add the HTML</h2>
        <ol>
	  <li><code>git add *.html</code></li>
	  <li><code>git commit -m "Adding HTML"</code></li>
        </ol>
      </section>

      <section class="slide">
        <h2>6. Push to Publish</h2>
        <ul>
          <li>Push to website</li>
        </ul>
<pre>$ git push origin gh-pages</pre>
        <ul>
          <li>Check <code>http://user.github.io/some-lesson/</code></li>
        </ul>
      </section>

      <section class="slide">
        <h2>What to Include in PRs</h2>
        <ul>
          <li>Only include source Markdown in PRs for review
	    <ul>
	      <li>Easier to read than generated HTML</li>
	      <li>Avoids each change showing up twice</li>
	    </ul>
	  </li>
	  <li>Lesson maintainers will re-generate and add HTML after PR is accepted</li>
        </ul>
      </section>

      <section class="slide">
        <h2>What's in the Template?</h2>
        <ul>
          <li>Description of required files and formatting rules</li>
          <li>Example files
	    <ul>
	      <li>Some you'll edit (e.g., <code>index.html</code>)</li>
	      <li>Some you'll delete (e.g., <code>01-one.md</code>)</li>
	      <li>Discussed in detail below</li>
	    </ul>
	  </li>
          <li>Validation tool
	    <ul>
	      <li>Please run this before pushing changes</li>
	    </ul>
	  </li>
        </ul>
      </section>

      <section class="slide">
        <h2>When Wrong is Right</h2>
        <ul>
          <li>We put generated HTML in the same branch and directory as Markdown source</li>
          <li>Generally a bad idea...</li>
          <li>...but means paths to image and data files are the same in both...</li>
          <li>...and avoids cross-branch compilation</li>
        </ul>
      </section>

      <section class="slide">
        <h2>Source Formats</h2>
        <ul>
          <li>IPython Notebooks are difficult to diff and merge</li>
          <li>Other formats (e.g., reStructured Text) are only used by one community</li>
        </ul>
	<div align="center">
	  <p>
	    <em>
	      You can write in anything you want
	      <br/>
	      as long as you translate it into Markdown
	      <br/>
	      that conforms to our style guide
	    </em>
	  </p>
	</div>
      </section>

      <section class="slide">
	<h2>Template Contents</h2>
	<p><code>README.md</code></p>
	<ul>
	  <li>Initially a copy of the template's README</li>
	  <li>Overwrite with a short description of the lesson</li>
	  <li>Please also include the text below</li>
	</ul>
<pre>
> Please see https://github.com/swcarpentry/lesson-example
> for instructions on formatting, building, and submitting lessons,
> or run make in this directory for a list of helpful commands.
</pre>
      </section>

      <section class="slide">
	<h2>Template Contents</h2>
	<p><code>Makefile</code>: do common operations</p>
	<ul>
          <li><code>make</code>: Display available commands</li>
          <li><code>make check</code>: Validate formatting</li>
          <li><code>make pages</code>: Build pages</li>
          <li><code>make settings</code>: Show variables and settings</li>
          <li><code>make clean</code>: Clean up junk files</li>
	</ul>
      </section>

      <section class="slide">
	<h2>Template Contents</h2>
	<p>A handful of mandatory files</p>
	<ul>
	  <li><code>index.md</code>: lesson's home page</li>
	  <li><code>discussion.md</code>: general discussion and pointers</li>
	  <li><code>instructors.md</code>: instructor's guide</li>
	  <li><code>motivation.md</code>: slideshow motivating lesson</li>
	  <li><code>reference.md</code>: reference guide for learners</li>
	</ul>
      </section>

      <section class="slide">
	<h2>Template Contents</h2>
	<p><code>nn-topic.md</code>: topics within lesson</p>
	<ul>
	  <li>E.g., <code>01-select.md</code></li>
	  <li>Each should be 10-15 minutes long</li>
	</ul>
	<div align="center">
	  <p>
	    <em>
	      These are for instructors and offline reference,
	      <br/>
	      <strong>not</strong> to be shown to learners during teaching
	    </em>
	  </p>
	</div>
      </section>

      <section class="slide">
	<h2>Template Contents</h2>
	<p>Sub-directories for lesson files</p>
	<ul>
	  <li><code>code</code>: source code</li>
	  <li><code>data</code>: data files</li>
	  <li><code>fig</code>: figures</li>
	</ul>
      </section>

      <section class="slide">
	<h2>Template Contents</h2>
	<p>Sub-directories for template files</p>
	<ul>
	  <li><code>css</code>: style files</li>
	  <li><code>img</code>: stock images (e.g., logos)</li>
	  <li><code>js</code>: Javascript</li>
	  <li><code>deck.js</code>: Javascript for slideshows</li>
	</ul>
	<div align="center">
	  <p>
	    <em>
	      These files are updated by pulling from <code>lesson-template</code>'s <code>gh-pages</code> branch
	    </em>
	  </p>
	</div>
      </section>

      <section class="slide">
	<h2>Template Contents</h2>
	<p>Sub-directories for formatting</p>
	<ul>
	  <li><code>_layouts</code>: page templates</li>
	  <li><code>_includes</code>: included HTML snippets</li>
	  <li>Named to be consistent with <code>workshop-template</code></li>
	</ul>
      </section>

      <section class="slide">
	<h2>Template Contents</h2>
	<p>Sub-directory for tools</p>
	<ul>
	  <li><code>check</code> validates formatting</li>
	  <li>We will add others soon</li>
	</ul>
      </section>

      <section class="slide">
        <h2>Existing Lessons</h2>
	<ul>
	  <li>See <a href="http://software-carpentry.org/lessons.html">http://software-carpentry.org/lessons.html</a></li>
	  <li>Please let us know when you start to work on another one so we can advertise it</li>
	</ul>
      </section>

      <section class="slide">
        <h2>Improving the Template</h2>
        <ul>
          <li>Fork <code>lesson-template</code> and send pull requests as usual</li>
          <li>File issues when anything goes wrong, gets in your way, seems confusing, ...</li>
        </ul>
	<div align="center">
	  <p>
	    <em>
	      Issues related to workflow are (at least) as welcome
	      <br/>
	      as issues related to content
	    </em>
	  </p>
	</div>
      </section>

      <section class="slide" data-container-class="no-status">
        <h2>Looking Ahead</h2>
        <ul>
          <li>Automatically collect links to lessons on GitHub</li>
          <li>Issue DOIs for lessons</li>
          <li>Package lessons for distribution</li>
        </ul>
	<div align="center">
	  <p><em>Thank you for listening</em></p>
          <p><img src="../img/software-carpentry-banner.png" alt="Software Carpentry Logo" /></p>
	</div>
      </section>

    </div>
  </body>
</html>
